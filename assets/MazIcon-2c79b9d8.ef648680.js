import{d as x,r as m,M as g,v as P,h as _,o as p,c as h,L as a,a3 as A,J as C,ae as $,ab as q}from"./entry.fe1998f0.js";const H=["innerHTML"],F=x({__name:"MazIcon",props:{src:{type:String,default:void 0},path:{type:String,default:void 0},name:{type:String,default:void 0},size:{type:String,default:void 0},title:{type:String,default:void 0},transformSource:{type:Function,default:l=>l}},emits:["loaded","unloaded","error"],setup(l,{emit:S}){const i={},s=m(),d=m(),w=()=>{try{return $("mazIconPath")}catch{return}},o=l,u=S,v=g(()=>o.path??w()),y=g(()=>o.src?o.src:v.value?`${v.value}/${o.name}.svg`:`/${o.name}.svg`);P(()=>{!o.name&&!o.src&&console.error('[maz-ui](MazIcon) you should provide "name" or "src" as prop')});const E=(e,n)=>{const t=e.querySelectorAll("title");if(t.length>0)t[0].textContent=n;else{const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=n,e.append(r)}},M=e=>Object.keys(e).reduce((n,t)=>(e[t]!==!1&&e[t]!==null&&e[t]!==void 0&&(n[t]=e[t]),n),{}),z=e=>{const n={},t=e.attributes;if(!t)return n;for(let r=t.length-1;r>=0;r--)n[t[r].name]=t[r].value;return n},L=e=>{let n=e.cloneNode(!0);return n=o.transformSource(e),o.title&&E(n,o.title),e.innerHTML},T=async e=>{i[e]||(i[e]=b(e));try{s.value=await i[e],await q(),u("loaded",d.value)}catch(n){s.value&&(s.value=void 0,u("unloaded")),delete i[e],u("error",n)}},b=e=>new Promise((n,t)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.addEventListener("load",()=>{if(r.status>=200&&r.status<400)try{let c=new DOMParser().parseFromString(r.responseText,"text/xml").querySelectorAll("svg")[0];c?(c=o.transformSource(c),n(c)):t(new Error('Loaded file is not valid SVG"'))}catch(f){t(f)}else t(new Error("Error loading SVG"))}),r.addEventListener("error",()=>t()),r.send()});return _(()=>T(y.value)),(e,n)=>(p(),h(C,null,[a(" eslint-disable vue/no-v-html "),a(" eslint-disable vue/html-self-closing "),s.value?(p(),h("svg",A({key:0,ref_key:"svgElem",ref:d,width:"1em",height:"1em"},{...z(s.value),...M(e.$attrs)},{style:`font-size: ${l.size}`,innerHTML:L(s.value)}),null,16,H)):a("v-if",!0),a(" eslint-enable vue/no-v-html "),a(" eslint-enable vue/html-self-closing ")],2112))}});export{F as default};
