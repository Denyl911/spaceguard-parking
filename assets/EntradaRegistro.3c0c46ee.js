import{M as U}from"./MazBtn-000f9f66.9e37222d.js";import{M as $}from"./MazDialog-d5f6a7d8.b4787efe.js";import{u as E,r as d,v as S,l as x,x as F,c as Z,b as a,D as M,w as o,B as l,f as s,E as R,C as H,F as J,o as D,g as r,t as c}from"./entry.b8ed1308.js";import{M as K}from"./MazInput-8e284503.09644955.js";const O={class:"bg-slate-400"},P={class:"container p-4"},Y=a("h1",{style:{color:"black","font-family":"Verdana","font-size":"36px"}},[a("b",null,"Entrada de Vehículos - Registro")],-1),j={class:"w-3/4 border bg-gradienttwo p-8 rounded-lg shadow-md"},q=a("h2",{style:{color:"white","font-family":"Verdana","font-size":"36px"},class:"mt-8"},"Datos del vehículo:",-1),G=a("p",null,"¿Deseas agregar un nuevo servicio adicional?",-1),Q={style:{float:"left","margin-left":"850px"}},W=a("br",null,null,-1),X=a("div",{style:{clear:"both"}},null,-1),ee=a("p",null,"Costo: $10 por hora",-1),ie={__name:"EntradaRegistro",setup(ae){const m=E();let e=d(""),i=d(20),k=d(new Date().toLocaleTimeString()),g=d(new Date().toLocaleDateString());const f=d(!1),v=d(!1),y=d(""),V=()=>{k.value=new Date().toLocaleTimeString()};S(()=>{setInterval(V,1e3)}),x(()=>{clearInterval(V)});const A=()=>{g.value=new Date().toLocaleDateString()};S(()=>{setInterval(A,1e3)}),x(()=>{clearInterval(A)}),S(()=>{const p=localStorage.getItem("lugDisp");p!==null&&(i.value=parseInt(p))});const I=F();function z(){e.value?I.push({name:"Servicios_Add-Servicios_Registro"}):m.error("No hay carro para asignarle un servicio",{position:"bottom",timeout:3e3})}function w(){let p=!1,n=!1;if(!e.value)m.error("Ingresa una placa",{position:"bottom",timeout:3e3});else{const t=/^[A-Z]{3}\d{3}[A-Z]$/,_=/^([A-Z]{3}-\d{3}-[A-Z])$/;if(t.test(e.value)?(e.value=`${e.value.slice(0,3)}-${e.value.slice(3,6)}-${e.value.slice(6)}`,p=!0):_.test(e.value)&&(n=!0),(JSON.parse(localStorage.getItem("entrada"))||[]).some(b=>b.placa===e.value))m.error("Ya existe un registro para esta placa",{position:"bottom",timeout:3e3});else if(p||n){const b={placa:e.value,lugDisp:i.value,fecha:g.value,hora:k.value};let h=JSON.parse(localStorage.getItem("entrada"));h?h.push(b):h=[b],localStorage.setItem("entrada",JSON.stringify(h)),m.success("Registro éxitoso",{position:"bottom",timeout:3e3}),i.value--,localStorage.setItem("lugDisp",i.value),f.value=!0}else m.error("Placa no válida. Ingresa una placa en formato AAA999B",{position:"bottom",timeout:3e3})}}const B=()=>{I.push({name:"Servicios_Add-Servicios_Registro",route:{placa:e}}),C()},C=()=>{f.value=!1};function L(){e.value?(y.value=new Date().toLocaleTimeString(),v.value=!0):m.error("No hay información para mostrar en el ticket",{position:"bottom",timeout:3e3})}function N(){v.value=!1}const T=()=>{e.value=e.value.toUpperCase()};return(p,n)=>{const t=U,_=$;return D(),Z("section",O,[a("div",P,[Y,(D(),M(t,{key:l(i),class:"mt-8 mb-5",color:"black"},{default:o(()=>[r("Lugares disponibles: "+c(l(i)),1)]),_:1})),s(t,{class:"mt-8 mb-5",style:R({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:o(()=>[r("Hora actual: "+c(l(k)),1)]),_:1},8,["style"]),s(t,{class:"mt-8 mb-5",style:R({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:o(()=>[r("Fecha actual: "+c(l(g)),1)]),_:1},8,["style"]),a("div",j,[q,s(l(K),{class:"mb-1",modelValue:l(e),"onUpdate:modelValue":n[0]||(n[0]=u=>H(e)?e.value=u:e=u),onInput:T,onKeyup:J(w,["enter"]),label:"Placa",disabled:l(i)===0},null,8,["modelValue","onKeyup","disabled"])]),s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:w},{default:o(()=>[r("Registrar")]),_:1}),s(_,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=u=>f.value=u),title:"Agregar Servicio Adicional"},{footer:o(()=>[s(t,{onClick:B,color:"success"},{default:o(()=>[r(" Sí ")]),_:1}),s(t,{onClick:C,color:"error"},{default:o(()=>[r(" No ")]),_:1})]),default:o(()=>[G]),_:1},8,["modelValue"])]),a("div",Q,[(D(),M(t,{key:l(i),class:"mt-8",color:"success"},{default:o(()=>[r("Lugar asignado:"),W,r(c(l(i)),1)]),_:1}))]),X,a("div",null,[s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:z},{default:o(()=>[r("Servicio adicional")]),_:1}),s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:L},{default:o(()=>[r("Imprimir ticket")]),_:1}),s(_,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=u=>v.value=u),title:"Detalle del Ticket"},{footer:o(()=>[s(t,{onClick:N,color:"success"},{default:o(()=>[r("Cerrar")]),_:1})]),default:o(()=>[a("p",null,"Placa: "+c(l(e)),1),a("p",null,"Hora: "+c(y.value),1),a("p",null,"Fecha: "+c(l(g)),1),a("p",null,"Lugar asignado: "+c(l(i)+1),1),ee]),_:1},8,["modelValue"])])])}}};export{ie as default};
