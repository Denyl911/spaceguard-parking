import{M as U}from"./MazBtn-000f9f66.17a7c7c0.js";import{M as E}from"./MazDialog-d5f6a7d8.0830be15.js";import{u as F,r as d,v as S,l as z,x as Z,c as $,b as o,D as C,w as a,y as l,f as s,E as M,z as H,F as J,o as y,g as r,t as c}from"./entry.88b27e95.js";import{M as K}from"./MazInput-8e284503.a624b2c6.js";const O={class:"bg-slate-400"},P={class:"container p-4"},Y=o("h1",{style:{color:"black","font-family":"Verdana","font-size":"36px"}},[o("b",null,"Entrada de Vehículos - Registro")],-1),j={class:"w-3/4 border bg-gradienttwo p-8 rounded-lg shadow-md"},q=o("h2",{style:{color:"white","font-family":"Verdana","font-size":"36px"},class:"mt-8"},"Datos del vehículo:",-1),G=o("p",null,"¿Deseas agregar un nuevo servicio adicional?",-1),Q={style:{float:"left","margin-left":"850px"}},W=o("br",null,null,-1),X=o("div",{style:{clear:"both"}},null,-1),re={__name:"EntradaRegistro",setup(ee){const m=F();let e=d(""),i=d(20),k=d(new Date().toLocaleTimeString()),g=d(new Date().toLocaleDateString());const f=d(!1),v=d(!1),D=d(""),V=()=>{k.value=new Date().toLocaleTimeString()};S(()=>{setInterval(V,1e3)}),z(()=>{clearInterval(V)});const A=()=>{g.value=new Date().toLocaleDateString()};S(()=>{setInterval(A,1e3)}),z(()=>{clearInterval(A)}),S(()=>{const p=localStorage.getItem("lugDisp");p!==null&&(i.value=parseInt(p))});const I=Z();function R(){e.value?I.push({name:"Servicios_Add-Servicios_Registro"}):m.error("No hay carro para asignarle un servicio",{position:"bottom",timeout:3e3})}function w(){let p=!1,n=!1;if(!e.value)m.error("Ingresa una placa",{position:"bottom",timeout:3e3});else{const t=/^[A-Z]{3}\d{3}[A-Z]$/,_=/^([A-Z]{3}-\d{3}-[A-Z])$/;if(t.test(e.value)?(e.value=`${e.value.slice(0,3)}-${e.value.slice(3,6)}-${e.value.slice(6)}`,p=!0):_.test(e.value)&&(n=!0),(JSON.parse(localStorage.getItem("entrada"))||[]).some(b=>b.placa===e.value))m.error("Ya existe un registro para esta placa",{position:"bottom",timeout:3e3});else if(p||n){const b={placa:e.value,lugDisp:i.value,fecha:g.value,hora:k.value};let h=JSON.parse(localStorage.getItem("entrada"));h?h.push(b):h=[b],localStorage.setItem("entrada",JSON.stringify(h)),m.success("Registro éxitoso",{position:"bottom",timeout:3e3}),i.value--,localStorage.setItem("lugDisp",i.value),f.value=!0}else m.error("Placa no válida. Ingresa una placa en formato AAA999B",{position:"bottom",timeout:3e3})}}const L=()=>{I.push({name:"Servicios_Add-Servicios_Registro",route:{placa:e}}),x()},x=()=>{f.value=!1};function N(){e.value?(D.value=new Date().toLocaleTimeString(),v.value=!0):m.error("No hay información para mostrar en el ticket",{position:"bottom",timeout:3e3})}function T(){v.value=!1}const B=()=>{e.value=e.value.toUpperCase()};return(p,n)=>{const t=U,_=E;return y(),$("section",O,[o("div",P,[Y,(y(),C(t,{key:l(i),class:"mt-8 mb-5",color:"black"},{default:a(()=>[r("Lugares disponibles: "+c(l(i)),1)]),_:1})),s(t,{class:"mt-8 mb-5",style:M({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:a(()=>[r("Hora actual: "+c(l(k)),1)]),_:1},8,["style"]),s(t,{class:"mt-8 mb-5",style:M({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:a(()=>[r("Fecha actual: "+c(l(g)),1)]),_:1},8,["style"]),o("div",j,[q,s(l(K),{class:"mb-1",modelValue:l(e),"onUpdate:modelValue":n[0]||(n[0]=u=>H(e)?e.value=u:e=u),onInput:B,onKeyup:J(w,["enter"]),label:"Placa",disabled:l(i)===0},null,8,["modelValue","onKeyup","disabled"])]),s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:w},{default:a(()=>[r("Registrar")]),_:1}),s(_,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=u=>f.value=u),title:"Agregar Servicio Adicional"},{footer:a(()=>[s(t,{onClick:L,color:"success"},{default:a(()=>[r(" Sí ")]),_:1}),s(t,{onClick:x,color:"error"},{default:a(()=>[r(" No ")]),_:1})]),default:a(()=>[G]),_:1},8,["modelValue"])]),o("div",Q,[(y(),C(t,{key:l(i),class:"mt-8",color:"success"},{default:a(()=>[r("Lugar asignado:"),W,r(c(l(i)),1)]),_:1}))]),X,o("div",null,[s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:R},{default:a(()=>[r("Servicio adicional")]),_:1}),s(t,{rounded:"",class:"mt-6 w-40",color:"black",pastel:"",onClick:N},{default:a(()=>[r("Imprimir ticket")]),_:1}),s(_,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=u=>v.value=u),title:"Detalle del Ticket"},{footer:a(()=>[s(t,{onClick:T,color:"success"},{default:a(()=>[r("Cerrar")]),_:1})]),default:a(()=>[o("p",null,"Placa: "+c(l(e)),1),o("p",null,"Hora: "+c(D.value),1),o("p",null,"Fecha: "+c(l(g)),1),o("p",null,"Lugar asignado: "+c(l(i)+1),1)]),_:1},8,["modelValue"])])])}}};export{re as default};
