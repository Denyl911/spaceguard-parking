import{M as $}from"./MazBtn-000f9f66.6fed24bc.js";import{M as E}from"./MazDialog-d5f6a7d8.3a72cbdc.js";import{u as F,r as d,v as k,l as N,x as H,c as x,b as s,B as o,E as Z,F as M,w as a,f as r,G as R,C as J,H as K,o as S,g as i,t as c}from"./entry.20fd3aae.js";import{M as O}from"./MazInput-8e284503.0fb23997.js";/* empty css                 */const P={class:"bg-slate-400"},G={class:"container p-4"},Y=s("h1",{style:{color:"black","font-family":"Verdana","font-size":"36px"}},[s("b",null,"Entrada de Vehículos - Registro")],-1),j={key:0},q={class:"w-3/4 border bg-gradienttwo p-8 rounded-lg shadow-md"},Q=s("h2",{style:{color:"white","font-family":"Verdana","font-size":"36px"},class:"mt-8"}," Datos del vehículo: ",-1),W=s("p",null,"¿Deseas agregar un nuevo servicio adicional?",-1),X=s("p",null,"Costo: $10 por hora",-1),ie={__name:"EntradaRegistro",setup(ee){const m=F();let e=d(""),t=d(20),D=d(new Date().toLocaleTimeString()),p=d(new Date().toLocaleDateString());const f=d(!1),v=d(!1),y=d(""),I=()=>{D.value=new Date().toLocaleTimeString()};k(()=>{localStorage.getItem("lugDisp")||localStorage.setItem("lugDisp",20),setInterval(I,1e3),t.value=Number(localStorage.getItem("lugDisp"))}),N(()=>{clearInterval(I)});const V=()=>{p.value=new Date().toLocaleDateString()};k(()=>{setInterval(V,1e3)}),N(()=>{clearInterval(V)}),k(()=>{const g=localStorage.getItem("lugDisp");g!==null&&(t.value=parseInt(g))});const A=H();function z(){e.value?A.push({name:"Servicios_Add-Servicios_Registro"}):m.error("No hay carro para asignarle un servicio",{position:"bottom",timeout:3e3})}function w(){let g=!1,n=!1;if(!e.value)m.error("Ingresa una placa",{position:"bottom",timeout:3e3});else{const l=/^[A-Z]{3}\d{3}[A-Z]$/,_=/^([A-Z]{3}-\d{3}-[A-Z])$/;if(l.test(e.value)?(e.value=`${e.value.slice(0,3)}-${e.value.slice(3,6)}-${e.value.slice(6)}`,g=!0):_.test(e.value)&&(n=!0),(JSON.parse(localStorage.getItem("entrada"))||[]).some(b=>b.placa===e.value))m.error("Ya existe un registro para esta placa",{position:"bottom",timeout:3e3});else if(g||n){const b={placa:e.value,lugDisp:t.value,fecha:p.value,hora:D.value};let h=JSON.parse(localStorage.getItem("entrada"));h?h.push(b):h=[b],localStorage.setItem("entrada",JSON.stringify(h)),m.success("Registro éxitoso",{position:"bottom",timeout:3e3}),t.value--,localStorage.setItem("lugDisp",t.value),f.value=!0}else m.error("Placa no válida. Ingresa una placa en formato AAA999B",{position:"bottom",timeout:3e3})}}const B=()=>{A.push({name:"Servicios_Add-Servicios_Registro",route:{placa:e}}),C()},C=()=>{f.value=!1};function L(){e.value?(y.value=new Date().toLocaleTimeString(),v.value=!0):m.error("No hay información para mostrar en el ticket",{position:"bottom",timeout:3e3})}function T(){v.value=!1}const U=()=>{e.value=e.value.toUpperCase()};return(g,n)=>{const l=$,_=E;return S(),x("section",P,[s("div",G,[Y,o(t)==0?(S(),x("h2",j,"No hay lugares Disponibles")):Z("",!0),(S(),M(l,{key:o(t),class:"mt-8 mb-5 mr-3",color:"black"},{default:a(()=>[i("Lugares disponibles: "+c(o(t)),1)]),_:1})),r(l,{class:"mt-8 mb-5 mr-3",style:R({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:a(()=>[i("Hora actual: "+c(o(D)),1)]),_:1},8,["style"]),r(l,{class:"mt-8 mb-5 mr-3",style:R({backgroundColor:"rgba(0, 0, 0, 0.5)"})},{default:a(()=>[i("Fecha actual: "+c(o(p)),1)]),_:1},8,["style"]),(S(),M(l,{key:o(t),class:"mt-8",color:"secondary"},{default:a(()=>[i("Lugar a asignar: "+c(o(t)),1)]),_:1})),s("div",q,[Q,r(o(O),{class:"mb-1",modelValue:o(e),"onUpdate:modelValue":n[0]||(n[0]=u=>J(e)?e.value=u:e=u),onInput:U,onKeyup:K(w,["enter"]),label:"Placa",disabled:o(t)===0},null,8,["modelValue","onKeyup","disabled"])]),r(l,{rounded:"",class:"mt-6 w-52 mr-32",color:"info",onClick:w},{default:a(()=>[i("Registrar")]),_:1}),r(l,{rounded:"",class:"mt-6 mr-3",color:"warning",onClick:z},{default:a(()=>[i("Servicio adicional")]),_:1}),r(l,{rounded:"",class:"mt-6",color:"warning",onClick:L},{default:a(()=>[i("Imprimir ticket")]),_:1}),r(_,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=u=>f.value=u),title:"Agregar Servicio Adicional"},{footer:a(()=>[r(l,{onClick:B,color:"success"},{default:a(()=>[i(" Sí ")]),_:1}),r(l,{onClick:C,color:"error"},{default:a(()=>[i(" No ")]),_:1})]),default:a(()=>[W]),_:1},8,["modelValue"])]),s("div",null,[r(_,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=u=>v.value=u),title:"Detalle del Ticket"},{footer:a(()=>[r(l,{onClick:T,color:"success"},{default:a(()=>[i("Cerrar")]),_:1})]),default:a(()=>[s("p",null,"Placa: "+c(o(e)),1),s("p",null,"Hora: "+c(y.value),1),s("p",null,"Fecha: "+c(o(p)),1),s("p",null,"Lugar asignado: "+c(o(t)+1),1),X]),_:1},8,["modelValue"])])])}}};export{ie as default};
